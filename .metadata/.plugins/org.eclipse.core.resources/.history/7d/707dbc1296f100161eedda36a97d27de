/*
 * EID's of group members
 * 
 */
import java.util.concurrent.Semaphore; // for implementation using Semaphores

public class CyclicBarrier {
	private int index;
	private Semaphore s;
	private int numReleased;
	private int parties;
	private int houseParty;
	
	
	
	public CyclicBarrier(int parties) {
		houseParty = parties;
		s = new Semaphore(parties, true);
		index = parties - 1;
		numReleased = 0;
		// Creates a new CyclicBarrier that will trip when
		// the given number of parties (threads) are waiting upon it
	}
	
	public int await() throws InterruptedException {
		int myIndex = index;
		while(s.availablePermits() > 0){
			index--;
			numReleased++;
			s.acquire();
		}
		while(s.tryAcquire() == false){
			wait();
		}

			
		
		// Waits until all parties have invoked await on this barrier.
		// If the current thread is not the last to arrive then it is
		// disabled for thread scheduling purposes and lies dormant until
		// the last thread arrives.
		// Returns: the arrival index of the current thread, where index
		// (parties - 1) indicates the first to arrive and zero indicates
		// the last to arrive.   
		
		
		
          // you need to write this code
	    return myIndex;
	}
}

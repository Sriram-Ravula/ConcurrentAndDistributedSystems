import java.io.*;
import java.net.Socket;
import java.net.SocketException;
import java.net.SocketTimeoutException;
import java.net.UnknownHostException;
import java.util.*;

public class LamportClient extends Thread{
	boolean f;
	public LamportClient(boolean first){
		f=first;
	}
	public void run(){
		if(f){
			for(int i = 0;i<Server.addresses.size();i++){
				if(i!=Server.ID){
					LamportClientThread t = new LamportClientThread(Server.addresses.get(i), Server.ports.get(i), i);
					t.start();
				}
				f=false;
			}
		}
		else{
			for(int i = 0;i<Server.addresses.size();i++){
				Server.request.set(i, true);
			}
			
		}
	}
    private synchronized static void requestCS(){
    	Server.clock.tick();
    	String request = String.valueOf(Server.clock.getClock()) + " " + String.valueOf(Server.ID) + " " + Server.message;
    	printStream.println(request);
    	Server.lamport.add(request);	
    }
}
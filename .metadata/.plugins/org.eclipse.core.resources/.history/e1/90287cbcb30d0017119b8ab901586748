import java.io.*;
import java.net.Socket;
import java.net.SocketException;
import java.net.SocketTimeoutException;
import java.net.UnknownHostException;
import java.util.*;

public class LamportClient extends Thread{
	boolean f;
	public LamportClient(boolean first){
		f=first;
	}
	private static LamportClientThread t[] = new LamportClientThread[Server.addresses.size()];
	public void run(){
		if(f){
			for(int i = 0;i<Server.addresses.size();i++){
				t[i] = new LamportClientThread(Server.addresses.get(i), Server.ports.get(i));
				t[i].start();
			}
		}
		else{
			for(int i = 0;i<Server.addresses.size();i++){
				t[i].requestCS();
			}
			
		}
	}
    private synchronized static void requestCS(){
		Server.clock.tick();
    	String request = String.valueOf(Server.clock.getClock()) + " " + String.valueOf(Server.ID) + " " + Server.message;
    	Server.lamport.add(request);	
    }
}